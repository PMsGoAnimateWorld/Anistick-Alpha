var _____WB$wombat$assign$function_____ = function(name) {return (self._wb_wombat && self._wb_wombat.local_init && self._wb_wombat.local_init(name)) || self[name]; };
if (!self.__WB_pmw) { self.__WB_pmw = function(obj) { this.__WB_source = obj; return this; } }
{
  let window = _____WB$wombat$assign$function_____("window");
  let self = _____WB$wombat$assign$function_____("self");
  let document = _____WB$wombat$assign$function_____("document");
  let location = _____WB$wombat$assign$function_____("location");
  let top = _____WB$wombat$assign$function_____("top");
  let parent = _____WB$wombat$assign$function_____("parent");
  let frames = _____WB$wombat$assign$function_____("frames");
  let opener = _____WB$wombat$assign$function_____("opener");

var URL_FAVORITE_MOVIE="/ajax/";var URL_FLAG_MOVIE="/ajax/flagMovie";var URL_DELETE_MOVIE="/ajax/deleteMovie";var URL_DELETE_MOVIE_BY_TEACHER="/ajax/deleteMovieByTeacher";var URL_UNDELETE_MOVIE="/ajax/undeleteMovie";var URL_REJECT_MOVIE="/ajax/rejectMovie";var URL_DELETE_FAVORITE="/ajax/deleteFavorite";var URL_STAFFPICKS_MOVIE="/ajax/addStaffpicksMovie";var URL_ADD_BEST_ANIMATION="/ajax/addBestAnimation";var URL_ADD_FEATUED_ANIMATION="/ajax/addFeaturedAnimation";var URL_SET_COPYABLE="/ajax/setcopyable";var URL_SET_PUBLISHED="/ajax/setpublished";var URL_SET_PRIVATE_SHARE="/ajax/setprivateshare";var URL_SET_PRIVATE_SHARE_FOR_SCHOOL="/ajax/setprivateshareforschool";var URL_SET_PUBLISHED_PSHARE="/ajax/setpublishedpshare";var URL_CHECK_MOVIE_COPY="/ajax/checkCopyMovie";var URL_SUBMIT_POLL="/ajax/submitPoll";var URL_CHECK_MOVIE_EDIT="/ajax/checkEditMovie";var URL_SET_ALLOW_DOWNLOAD="/ajax/setAllowDownload";var URL_RECOMMEND="/ajax/movie_recommend";var _publishStatusHistory=new Array();var _pshareStatusHistory=new Array();function checkEditMovie(A){new Ajax.Request(URL_CHECK_MOVIE_EDIT+"/"+A,{method:"post",onSuccess:function(C){var B=C.responseText;checkEditMovieComplete(B)},onFailure:function(){displayFeedback("1Error contacting the server")}})}function checkEditMovieComplete(response){parseResponse(response);if(typeof responseArray.json.url!="undefined"){if(responseArray.json.url=="reload"){window.location=window.location}else{var _script;if(_script=responseArray.json.url.match(/^javascript:(.*)$/)){eval(_script[1])}else{window.location=responseArray.json.url}}}else{if(responseArray.code=="0"){var html="";html=responseArray.html;if(view_name=="school"){jQuery("#OG_title").html(GT.gettext("Recover Animation"));jQuery("#OG_content").html(html);showOG()}else{showHTMLBox(GT.gettext("Recover Animation"),180,html,"autosave_dialog",undefined,true)}$("altime").innerHTML=autosaveTimeFormat($("altime").innerHTML);$("alatime").innerHTML=autosaveTimeFormat($("alatime").innerHTML)}else{displayFeedback(responseArray.code+responseArray.json.error)}}resetResponse()}function autosaveTimeFormat(D){var C=convertTime(D);var B=new Date(D*1000);var A=B.getFullYear();var E=C.indexOf(A);if(E>0){C=C.replace(A,A+"<br/>")}return C}function convertTime(E){var C=new Date(E*1000);var A=C.toLocaleString();var F=C.getTimezoneOffset();var D=A.indexOf("(");if(D>0){A=A.substring(0,D)}if(A.indexOf("GMT")<0){var B=Math.abs(F/60);if(B<10){B="0"+B}B=B+"00";if(F>0){A=A+" GMT-"+B}else{A=A+" GMT+"+B}}return A}function favoriteMovie(D,C,B,A){pageTracker._trackPageview("/pageTracker/ajax/favoriteMovie");new Ajax.Request(URL_FAVORITE_MOVIE+C+"/"+D,{method:"post",onSuccess:function(F){var E=F.responseText;favoriteMovieComplete(E,C,B,A)},onFailure:function(){displayFeedback("1"+GT.gettext("Error contacting the server"))}})}function flagMovie(A){pageTracker._trackPageview("/pageTracker/ajax/flagMovie");new Ajax.Request(URL_FLAG_MOVIE+"/"+A,{method:"post",onSuccess:function(C){var B=C.responseText;flagMovieComplete(B)},onFailure:function(){displayFeedback("1"+GT.gettext("Error contacting the server"))}})}function favoriteMovieComplete(B,D,C,A){parseResponse(B);if(typeof responseArray.json.url!="undefined"){window.location=responseArray.json.url}else{if(responseArray.code=="0"){if(D=="deleteFavorite"){displayFeedback(responseArray.code+GT.gettext("Animation removed from your recommendations"))}else{displayFeedback(responseArray.code+GT.gettext("Animation added to your recommendations"))}$(C).style.display="none";$(A).style.display="block"}else{displayFeedback(responseArray.code+responseArray.json.error)}}resetResponse()}function flagMovieComplete(A){parseResponse(A);if(typeof responseArray.json.url!="undefined"){window.location=responseArray.json.url}else{if(responseArray.code=="0"){displayFeedback(responseArray.code+GT.gettext("Animation flagged as inappropriate"))}else{displayFeedback(responseArray.code+responseArray.json.error)}}resetResponse()}function deleteMovie(D,B,E,A){if(B&&E&&A){var F=$(E).innerHTML-0;var C=URL_DELETE_MOVIE+"/"+D+"/"+B+"/"+F}else{var C=URL_DELETE_MOVIE+"/"+D}new Ajax.Request(C,{method:"post",onSuccess:function(I){var H=I.responseText;parseResponse(H);if(typeof responseArray.json.url!="undefined"){window.location=responseArray.json.url}else{if(responseArray.code=="0"){displayFeedback(responseArray.code+GT.gettext("This movie has successfully been moved to your trash."));addDelCount();if(B&&E&&A){$(A).innerHTML=responseArray.html;if(jQuery){var G=jQuery.Event("delete");G.hasNextPage=(responseArray.json.next_page==1);G.movieId=D;jQuery("#"+A).trigger(G)}}}else{displayFeedback(responseArray.code+responseArray.json.error)}}resetResponse()},onFailure:function(){displayFeedback("1Error contacting the server")}})}function deleteMovieByTeacher(D,B,E,A){var G=GT.gettext("You will not be able to watch this animation any more!");if(!confirm(G)){return }else{if(B&&E&&A){var F=$(E).innerHTML-0;var C=URL_DELETE_MOVIE_BY_TEACHER+"/"+D+"/"+B+"/"+F}else{var C=URL_DELETE_MOVIE_BY_TEACHER+"/"+D}new Ajax.Request(C,{method:"post",onSuccess:function(J){var I=J.responseText;parseResponse(I);if(typeof responseArray.json.url!="undefined"){window.location=responseArray.json.url}else{if(responseArray.code=="0"){displayFeedback(responseArray.code+GT.gettext("Animation has been deleted"));if(B&&E&&A){$(A).innerHTML=responseArray.html;if(jQuery){var H=jQuery.Event("delete");H.hasNextPage=(responseArray.json.next_page==1);H.movieId=D;jQuery("#"+A).trigger(H)}}}else{displayFeedback(responseArray.code+responseArray.json.error)}}resetResponse()},onFailure:function(){displayFeedback("1Error contacting the server")}})}}function undeleteMovie(D,B,E,A){if(B&&E&&A){var F=$(E).innerHTML-0;var C=URL_UNDELETE_MOVIE+"/"+D+"/"+B+"/"+F}else{var C=URL_UNDELETE_MOVIE+"/"+D}new Ajax.Request(C,{method:"post",onSuccess:function(I){var H=I.responseText;parseResponse(H);if(typeof responseArray.json.url!="undefined"){window.location=responseArray.json.url}else{if(responseArray.code=="0"){displayFeedback(responseArray.code+GT.gettext("This movie has successfully been recovered."));addMvCount();if(B&&E&&A){$(A).innerHTML=responseArray.html;if(jQuery){var G=jQuery.Event("delete");G.hasNextPage=(responseArray.json.next_page==1);G.movieId=D;jQuery("#"+A).trigger(G)}}}else{displayFeedback(responseArray.code+responseArray.json.error)}}resetResponse()},onFailure:function(){displayFeedback("1Error contacting the server")}})}function rejectMovie(B){var C="Are you sure you want to reject this animation?";if(!confirm(C)){return }else{var A=URL_REJECT_MOVIE+"/"+B;new Ajax.Request(A,{method:"post",onSuccess:function(E){var D=E.responseText;parseResponse(D);if(typeof responseArray.json.url!="undefined"){window.location=responseArray.json.url}else{if(responseArray.code=="0"){displayFeedback(responseArray.code+"Animation has been rejected")}else{displayFeedback(responseArray.code+responseArray.json.error)}}resetResponse()},onFailure:function(){displayFeedback("1Error contacting the server")}})}}function deleteFavorite(C,A,D,B){var F=GT.gettext("Are you sure you want to remove this movie from your favorite list?");if(!confirm(F)){return }else{var E=$(D).innerHTML-0;new Ajax.Request(URL_DELETE_FAVORITE+"/"+C+"/"+A+"/"+E,{method:"post",onSuccess:function(H){var G=H.responseText;parseResponse(G);if(typeof responseArray.json.url!="undefined"){window.location=responseArray.json.url}else{if(responseArray.code=="0"){displayFeedback(responseArray.code+GT.gettext("Animation has been removed from your recommendations"));$(B).innerHTML=responseArray.html}else{displayFeedback(responseArray.code+responseArray.json.error)}}resetResponse()},onFailure:function(){displayFeedback("1"+GT.gettext("Error contacting the server"))}})}}function copyMovie(B,A){var C="This movie was not created on this site.\nAre you sure to copy it to this site?";if(confirm(C)){checkCopyMovie(B,A)}}function editMovie(A){var B="To edit this movie, you are about to leave this site.\nDo you want to continue?";if(confirm(B)){location.href=A}}function staffpicksMovie(A){var B="Are you sure to Staffpicks this Animation?";if(!confirm(B)){return }else{new Ajax.Request(URL_STAFFPICKS_MOVIE+"/"+A,{method:"post",onSuccess:function(D){var C=D.responseText;parseResponse(C);if(typeof responseArray.json.url!="undefined"){window.location=responseArray.json.url}else{if(responseArray.code=="0"){displayFeedback(responseArray.code+"The animation has been added to Staffpicks")}else{displayFeedback(responseArray.code+responseArray.json.error)}}resetResponse()},onFailure:function(){displayFeedback("1Error contacting the server")}})}}function addBestAnimation(A){var B="Are you sure to add this animation as one of the best animations?";if(!confirm(B)){return }new Ajax.Request(URL_ADD_BEST_ANIMATION+"/"+A,{method:"post",onSuccess:function(D){var C=D.responseText;parseResponse(C);if(typeof responseArray.json.url!="undefined"){window.location=responseArray.json.url}else{if(responseArray.code=="0"){displayFeedback(responseArray.code+"The animation is one of the best animations now")}else{displayFeedback(responseArray.code+responseArray.json.error)}}resetResponse()},onFailure:function(){displayFeedback("1Error contacting the server")}})}function featureAnimation(A){var B="Are you sure to feature this Animation?";if(!confirm(B)){return }else{new Ajax.Request(URL_ADD_FEATUED_ANIMATION+"/"+A,{method:"post",onSuccess:function(D){var C=D.responseText;parseResponse(C);if(typeof responseArray.json.url!="undefined"){window.location=responseArray.json.url}else{if(responseArray.code=="0"){displayFeedback(responseArray.code+"The animation has been added as featured animation")}else{displayFeedback(responseArray.code+responseArray.json.error)}}resetResponse()},onFailure:function(){displayFeedback("1Error contacting the server")}})}}function registerMoviePublishStatusHistory(B,A){_publishStatusHistory[B]=A}function getMoviePublishStatusHistory(A){if(!_publishStatusHistory[A]){return null}return _publishStatusHistory[A]}function registerMoviePshareStatusHistory(B,A){_pshareStatusHistory[B]=A}function getMoviePshareStatusHistory(A){if(!_pshareStatusHistory[A]){return null}return _pshareStatusHistory[A]}function updateMovieStatus(F,H,G,E,B,D,A){pageTracker._trackPageview("/pageTracker/ajax/"+F+"/"+B);var C;switch(F){case"copy":C=URL_SET_COPYABLE+"/"+E+"/"+B;break;case"publish":C=URL_SET_PUBLISHED+"/"+E+"/"+B;break;case"pshare":C=URL_SET_PRIVATE_SHARE+"/"+E+"/"+B;break;case"pshareteacher":C=URL_SET_PRIVATE_SHARE_FOR_SCHOOL+"/"+E+"/"+B;break;case"publishpshare":C=URL_SET_PUBLISHED_PSHARE+"/"+E+"/"+B;break}new Ajax.Request(C,{method:"post",onSuccess:function(L){var I=L.responseText;parseResponse(I);if(typeof responseArray.json.url!="undefined"){window.location=responseArray.json.url}else{if(responseArray.code=="0"){if($("movie_thumb_"+E)){$("movie_thumb_"+E).src="/static/go/img/v2/"+D+"_overlay.gif"}else{if(F!="copy"&&$("animation_"+E)){var K=jQuery("#animation_"+E);var J=["public","private","draft","processing","hidden"].filter(function(N,M,O){return K.hasClass(N)})[0];K.trigger("updateMovieStatus",[J,D])}}if($(H)){$(H).show()}if($(G)){$(G).hide()}if(F=="pshare"){registerMoviePshareStatusHistory(E,B);if(B=="1"){if($(A)){$(A).triggerPshareStatusChange(E,true)}}else{if($(A)){$(A).triggerPshareStatusChange(E,false)}}}if(F=="publish"){registerMoviePublishStatusHistory(E,B);if(B=="1"){if($(A)){$(A).triggerPublishStatusChange(E,true)}}else{if($(A)){$(A).triggerPublishStatusChange(E,false)}}}if(F=="publishpshare"){registerMoviePshareStatusHistory(E,B);registerMoviePublishStatusHistory(E,B);if(B=="1"){if($(A)){$(A).triggerPshareStatusChange(E,false);$(A).triggerPublishStatusChange(E,true)}}else{if($(A)){$(A).triggerPublishStatusChange(E,false);$(A).triggerPshareStatusChange(E,true)}}}}else{displayFeedback(responseArray.code+responseArray.json.error)}}resetResponse()},onFailure:function(){displayFeedback("1Error contacting the server")}})}function updatePrivateSharing(A,B,C){if(A){if(C){$(C).hide()}if(B){$(B).show()}}else{if(C){$(C).show()}if(B){$(B).hide()}}}function setPrivateSharing(A){is_private_sharing=A;return }function publishToLessonGallery(C,A,G,F,D){var E={};var B=URL_SET_PUBLISHED+"/"+C+"/"+A;var D=D||"";if(D){E.category=D}jQuery.post(B,E,function(H){parseResponse(H);if(responseArray.code=="0"){jQuery("#"+G).show();jQuery("#"+F).hide();if(jQuery("#movie_select_category").length){jQuery.unblockUI()}displayFeedback("0This movie has published to Lesson Gallery")}else{if(!responseArray.json.select_category){displayFeedback(responseArray.code+"Error")}else{if(jQuery("#movie_select_category").length==0){jQuery("body").append(responseArray.html)}jQuery.blockUI({message:jQuery("#movie_select_category"),css:{padding:0,margin:0,width:"auto",top:"250px",left:"40%",textAlign:"center",color:"#000",border:"none",backgroundColor:"transparent",cursor:"auto"},overlayCSS:{cursor:"auto"}})}}})}function checkCopyMovie(B,A){new Ajax.Request(URL_CHECK_MOVIE_COPY+"/"+A,{method:"post",onSuccess:function(E){var C=E.responseText;parseResponse(C);if(responseArray.json.free=="true"){location.href=B}else{var D=GT.gettext("This animation contains premium character(s)\nThe cost to copy this movie is:\n");if(responseArray.json.money_points>0&&responseArray.json.sharing_points>0){D=D+responseArray.json.money_points+" GoBucks and "+responseArray.json.sharing_points+" GoPoints."}else{if(responseArray.json.money_points>0){D=D+responseArray.json.money_points+" GoBucks."}else{if(responseArray.json.sharing_points>0){D=D+responseArray.json.sharing_points+" GoPoints."}}}if(responseArray.json.notenoughpoints=="true"){D=D+"\n\n"+GT.gettext("You do not have sufficient points to copy this animation.");alert(D)}else{D=D+"\n\n"+GT.gettext("Would you like to buy it?");if(confirm(D)){location.href=B}}}},onFailure:function(){displayFeedback("1"+GT.gettext("Error contacting the server"))}})}function toggleGigya(){if($("divWildfirePost").visible()){$("divWildfirePost").hide()}else{$("divWildfirePost").show()}}var to;function toggleUserStats(){showHideContent("1");$("toggleLink").writeAttribute("expanded",1-($("toggleLink").readAttribute("expanded")||"0"));if($("toggleLink").readAttribute("expanded")=="1"){$("toggleLink").innerHTML=GT.gettext("minimize");$("short_description").hide();$("join_date").style.display="block";$("userstats").style.height="55px"}else{$("toggleLink").innerHTML=GT.gettext("more");$("join_date").style.display="none";$("short_description").show();$("userstats").style.height="27px"}}function toggleMessagePreview(A,C,B){if(B){$(A).style.display="block";$(C).style.display="block"}else{$(A).style.display="none";$(C).style.display="none"}}function sendFBContent(){new Ajax.Request("/ajax/boxChannel/"+jQuery("#channel-dropdown").getSSKey(),{method:"post",onSuccess:function(B){var A=B.responseText;parseResponse(A);$("channel_content_div").innerHTML=responseArray.html},onFailure:function(){displayFeedback("1Error contacting the server")}})}function showSurveyOverlay(B){var A=currPos();A[1]=A[1]+100;$("surveyoverlay").style.display="block";$("overlayObject").style.margin=A[1]+"px 0px 0px 0px";if(B){grayOut(true,"showSurvey")}else{grayOut(false,"showSurvey")}}function hideSurvey(){grayOut(false,"showSurvey");$("surveyoverlay").style.display="none"}function submitPoll(){for(i=0;i<document.surveyForm.answer.length;i++){if(document.surveyForm.answer[i].checked){ans=document.surveyForm.answer[i].value}}other=document.surveyForm.other.value;if(ans!="no"&&ans!="yes"){other=ans;ans="yes"}new Ajax.Request(URL_SUBMIT_POLL+"/"+ans+"/"+other,{method:"post",onSuccess:function(B){var A=B.responseText;parseResponse(A);hideSurvey()},onFailure:function(){displayFeedback("1Error contacting the server")}})}function submitPollKeyPress(B){document.surveyForm.answer[2].checked=true;var A;if(B&&B.which){B=B;A=B.which}else{B=event;A=B.keyCode}if(A==13){submitPoll();return false}else{return true}}function setAllowDownload(B,A){new Ajax.Request(URL_SET_ALLOW_DOWNLOAD+"/"+B+"/"+A,{method:"post",onSuccess:function(D){var C=D.responseText;parseResponse(C);if(A){jQuery("#downloadable").hide();jQuery("#notDownloadable").show()}else{jQuery("#downloadable").show();jQuery("#notDownloadable").hide()}},onFailure:function(){displayFeedback("1Error contacting the server")}})}function showPublishOptions(A){if(A){jQuery(".publish_options").show()}else{jQuery(".publish_options").hide()}}function handleFacebookLike(A){pageTracker._trackPageview("/pageTracker/ajax/fbLike");jQuery("#recommend_button").trigger("click")}function recommendMovie(A){pageTracker._trackPageview("/pageTracker/ajax/favoriteMovie");jQuery.post(URL_RECOMMEND,{movie_id:A},function(B){parseResponse(B);if(responseArray.code==0){jQuery("#recommended_button, #recommend_button").remove();jQuery("#recommend_button_div").prepend(responseArray.html);displayFeedback("0"+responseArray.json.message)}else{displayFeedback("1"+responseArray.error)}resetResponse()})}function handleFacebookShare(B,A){FB.getLoginStatus(function(C){if(C.session){getMovieFBMLShareOverlay(A)}else{FB.ui({method:"feed",link:B})}})}function getMovieFBMLShareOverlay(A){if(!jQuery("#movie_fbml_share_overlay").length){jQuery.get("/ajax/getMovieFBMLShareOverlay/"+A,function(B){parseResponse(B);if(responseArray.code=="0"){document.getElementById("offer_container").innerHTML=responseArray.html;FB.XFBML.parse(document.getElementById("movie_fbml_share_overlay"));showOfferOverlay(jQuery("#movie_fbml_share_overlay"))}else{displayFeedback("1"+responseArray.error)}})}else{FB.XFBML.parse(document.getElementById("movie_fbml_share_overlay"));showOfferOverlay(jQuery("#movie_fbml_share_overlay"))}}function getMovieYoutubeExportOverlay(A,B){B=(!B)?"0":"1";jQuery.get("/ajax/getMovieYoutubeExportOverlay/"+A+"/"+B,function(C){parseResponse(C);if(responseArray.code=="0"){var D=jQuery("#movie_youtube_export_overlay");if(D.length){D.replaceWith(responseArray.html)}else{jQuery("body").append(responseArray.html);jQuery("#youtube_export_public,#youtube_export_private").live("click",function(){window.open(jQuery(this).attr("href"),"_ga_youtube_export","toolbar=no,status=no,height=500,width=960")})}showOfferOverlay(jQuery("#movie_youtube_export_overlay"))}else{displayFeedback("1"+responseArray.json.error)}})}function showYoutubeAd(){var A=jQuery("#youtube_button");if(!A.length){return }var E=A.offset();var D=jQuery("#youtube_overlay_ad").clone().appendTo("body");jQuery("#youtube_overlay_ad").remove();var B=E.top-D.height()+A.height();var C=E.left-(D.width()/2)+(A.width()/2)+3;D.css("top",B+"px");D.css("left",C+"px");D.css("z-index","50");jQuery("#darkenScreenObject").show();D.css("display","block")}function showYoutubeAd2(){var A=jQuery("#youtube_upgrade_button");if(!A.length){return }var E=A.offset();var D=jQuery("#youtube_overlay_ad2").clone().appendTo("body");jQuery("#youtube_overlay_ad2").remove();var B=E.top-D.height()+A.height()+2;var C=E.left-(D.width()/2)+(A.width()/2)-23;D.css("top",B+"px");D.css("left",C+"px");D.css("z-index","50");jQuery("#darkenScreenObject").show();D.css("display","block")}function hideYoutubeAd(A){jQuery(A+", #darkenScreenObject").hide()}function embedMovieInfo(A){jQuery.post("/ajax/getMovieEmbedInfo/"+A,function(B){showOverlay(B,{top:"200px"})})};

}
/*
     FILE ARCHIVED ON 06:53:33 Dec 03, 2011 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 09:59:37 Apr 16, 2022.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 52.996
  exclusion.robots: 0.077
  exclusion.robots.policy: 0.071
  RedisCDXSource: 0.529
  esindex: 0.006
  LoadShardBlock: 31.843 (3)
  PetaboxLoader3.datanode: 126.214 (4)
  CDXLines.iter: 18.664 (3)
  load_resource: 96.786
*/